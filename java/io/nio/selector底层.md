## Selector 底层实现

定义：nio中多路复用的实现机制，是Linux系统提供的

文件描述符（fd）：是一个抽象的概念，形式上是一个整数，实际上是一个索引值。指向内核中的为每一个进程维护线程所打开的文件的纪录表。当程序打开一个文件或者创建一个文件的时候，内核进程会返回一个FD

* select：维护一个bitmap（数组）存放fd。32位 1024 64位 2048 可以修改内核配置，但是不建议；
* poll：维护了一个链表+数组的结构存放fd，先while 循环 然后是数组遍历，无上限；
* epoll：事件驱动，维护了一个红黑树存放fd，以及一个用户事件链表队列；

| 名称   | 操作方式 | 底层实现            | 最大连接数      |
| ------ | -------- | ------------------- | --------------- |
| select | 遍历     | bitmap（数组）      | 32 1024 64 2048 |
| poll   | 遍历     | 链表+数组           | 无上限          |
| epoll  | 事件回调 | 红黑树+事件链表队列 | 无上限          |

不同系统nio底层实现

window：select
linux：2.6以上时epoll ，2.6以下是poll
mac：kqueue

